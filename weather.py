import requests
from dotenv import load_dotenv
import os
import datetime
from zoneinfo import ZoneInfo


# Load variables from .env file
load_dotenv()

# Access environment variables
api_key = os.getenv("openweather_api")
city_name = os.getenv("city_code")

# refer to openweather docs for url api call format
base_url = "http://api.openweathermap.org/data/2.5/forecast?"

complete_url = f"{base_url}id={city_name}&appid={api_key}"

degrees_fahrenheit = "Â°F"


# get request
#response = requests.get(complete_url)

# convert response to python dict
#data = response.json()

# using data from api pull for testing
data = {'cod': '200', 'message': 0, 'cnt': 40, 'list': [{'dt': 1749006000, 'main': {'temp': 295.9, 'feels_like': 296.06, 'temp_min': 295.9, 'temp_max': 297.05, 'pressure': 1017, 'sea_level': 1017, 'grnd_level': 1007, 'humidity': 70, 'temp_kf': -1.15}, 'weather': [{'id': 801, 'main': 'Clouds', 'description': 'few clouds', 'icon': '02n'}], 'clouds': {'all': 19}, 'wind': {'speed': 3.25, 'deg': 96, 'gust': 9.65}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-04 03:00:00'}, {'dt': 1749016800, 'main': {'temp': 295.71, 'feels_like': 295.9, 'temp_min': 295.32, 'temp_max': 295.71, 'pressure': 1017, 'sea_level': 1017, 'grnd_level': 1006, 'humidity': 72, 'temp_kf': 0.39}, 'weather': [{'id': 801, 'main': 'Clouds', 'description': 'few clouds', 'icon': '02n'}], 'clouds': {'all': 24}, 'wind': {'speed': 4.68, 'deg': 118, 'gust': 12.09}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-04 06:00:00'}, {'dt': 1749027600, 'main': {'temp': 294.12, 'feels_like': 294.31, 'temp_min': 293.23, 'temp_max': 294.12, 'pressure': 1017, 'sea_level': 1017, 'grnd_level': 1007, 'humidity': 78, 'temp_kf': 0.89}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'clouds': {'all': 6}, 'wind': {'speed': 3.64, 'deg': 111, 'gust': 11.47}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-04 09:00:00'}, {'dt': 1749038400, 'main': {'temp': 294.72, 'feels_like': 295.13, 'temp_min': 294.72, 'temp_max': 294.72, 'pressure': 1018, 'sea_level': 1018, 'grnd_level': 1008, 'humidity': 84, 'temp_kf': 0}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'clouds': {'all': 6}, 'wind': {'speed': 2.3, 'deg': 60, 'gust': 5.25}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-04 12:00:00'}, {'dt': 1749049200, 'main': {'temp': 300.75, 'feels_like': 302.73, 'temp_min': 300.75, 'temp_max': 300.75, 'pressure': 1018, 'sea_level': 1018, 'grnd_level': 1008, 'humidity': 67, 'temp_kf': 0}, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03d'}], 'clouds': {'all': 27}, 'wind': {'speed': 3.55, 'deg': 97, 'gust': 5.53}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-04 15:00:00'}, {'dt': 1749060000, 'main': {'temp': 299.43, 'feels_like': 299.43, 'temp_min': 299.43, 'temp_max': 299.43, 'pressure': 1017, 'sea_level': 1017, 'grnd_level': 1007, 'humidity': 76, 'temp_kf': 0}, 'weather': [{'id': 501, 'main': 'Rain', 'description': 'moderate rain', 'icon': '10d'}], 'clouds': {'all': 46}, 'wind': {'speed': 4.28, 'deg': 92, 'gust': 5.81}, 'visibility': 6466, 'pop': 1, 'rain': {'3h': 4.16}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-04 18:00:00'}, {'dt': 1749070800, 'main': {'temp': 299.5, 'feels_like': 299.5, 'temp_min': 299.5, 'temp_max': 299.5, 'pressure': 1015, 'sea_level': 1015, 'grnd_level': 1005, 'humidity': 81, 'temp_kf': 0}, 'weather': [{'id': 501, 'main': 'Rain', 'description': 'moderate rain', 'icon': '10d'}], 'clouds': {'all': 48}, 'wind': {'speed': 4.59, 'deg': 88, 'gust': 6.31}, 'visibility': 6171, 'pop': 1, 'rain': {'3h': 3.74}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-04 21:00:00'}, {'dt': 1749081600, 'main': {'temp': 297.15, 'feels_like': 297.93, 'temp_min': 297.15, 'temp_max': 297.15, 'pressure': 1015, 'sea_level': 1015, 'grnd_level': 1005, 'humidity': 89, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 38}, 'wind': {'speed': 4.18, 'deg': 89, 'gust': 8.6}, 'visibility': 4896, 'pop': 1, 'rain': {'3h': 2.09}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-05 00:00:00'}, {'dt': 1749092400, 'main': {'temp': 294.84, 'feels_like': 295.55, 'temp_min': 294.84, 'temp_max': 294.84, 'pressure': 1017, 'sea_level': 1017, 'grnd_level': 1007, 'humidity': 95, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10n'}], 'clouds': {'all': 5}, 'wind': {'speed': 3.95, 'deg': 79, 'gust': 11.94}, 'visibility': 10000, 'pop': 0.73, 'rain': {'3h': 0.26}, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-05 03:00:00'}, {'dt': 1749103200, 'main': {'temp': 293.67, 'feels_like': 294.28, 'temp_min': 293.67, 'temp_max': 293.67, 'pressure': 1016, 'sea_level': 1016, 'grnd_level': 1006, 'humidity': 96, 'temp_kf': 0}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'clouds': {'all': 4}, 'wind': {'speed': 3.37, 'deg': 80, 'gust': 9.74}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-05 06:00:00'}, {'dt': 1749114000, 'main': {'temp': 292.6, 'feels_like': 293.13, 'temp_min': 292.6, 'temp_max': 292.6, 'pressure': 1016, 'sea_level': 1016, 'grnd_level': 1006, 'humidity': 97, 'temp_kf': 0}, 'weather': [{'id': 801, 'main': 'Clouds', 'description': 'few clouds', 'icon': '02n'}], 'clouds': {'all': 22}, 'wind': {'speed': 2.74, 'deg': 84, 'gust': 7.54}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-05 09:00:00'}, {'dt': 1749124800, 'main': {'temp': 293.59, 'feels_like': 294.14, 'temp_min': 293.59, 'temp_max': 293.59, 'pressure': 1017, 'sea_level': 1017, 'grnd_level': 1008, 'humidity': 94, 'temp_kf': 0}, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03d'}], 'clouds': {'all': 25}, 'wind': {'speed': 2.82, 'deg': 73, 'gust': 4.86}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-05 12:00:00'}, {'dt': 1749135600, 'main': {'temp': 298.19, 'feels_like': 298.81, 'temp_min': 298.19, 'temp_max': 298.19, 'pressure': 1018, 'sea_level': 1018, 'grnd_level': 1008, 'humidity': 79, 'temp_kf': 0}, 'weather': [{'id': 803, 'main': 'Clouds', 'description': 'broken clouds', 'icon': '04d'}], 'clouds': {'all': 63}, 'wind': {'speed': 2.36, 'deg': 92, 'gust': 2.6}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-05 15:00:00'}, {'dt': 1749146400, 'main': {'temp': 301.38, 'feels_like': 303.85, 'temp_min': 301.38, 'temp_max': 301.38, 'pressure': 1016, 'sea_level': 1016, 'grnd_level': 1006, 'humidity': 67, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 69}, 'wind': {'speed': 1.6, 'deg': 96, 'gust': 1.5}, 'visibility': 10000, 'pop': 0.22, 'rain': {'3h': 0.49}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-05 18:00:00'}, {'dt': 1749157200, 'main': {'temp': 302.07, 'feels_like': 305.35, 'temp_min': 302.07, 'temp_max': 302.07, 'pressure': 1015, 'sea_level': 1015, 'grnd_level': 1005, 'humidity': 68, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 47}, 'wind': {'speed': 0.9, 'deg': 116, 'gust': 1.07}, 'visibility': 10000, 'pop': 1, 'rain': {'3h': 1.62}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-05 21:00:00'}, {'dt': 1749168000, 'main': {'temp': 300.21, 'feels_like': 302.93, 'temp_min': 300.21, 'temp_max': 300.21, 'pressure': 1015, 'sea_level': 1015, 'grnd_level': 1005, 'humidity': 79, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 34}, 'wind': {'speed': 1.37, 'deg': 70, 'gust': 1.41}, 'visibility': 10000, 'pop': 1, 'rain': {'3h': 0.6}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-06 00:00:00'}, {'dt': 1749178800, 'main': {'temp': 295.67, 'feels_like': 296.41, 'temp_min': 295.67, 'temp_max': 295.67, 'pressure': 1017, 'sea_level': 1017, 'grnd_level': 1007, 'humidity': 93, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10n'}], 'clouds': {'all': 1}, 'wind': {'speed': 1.7, 'deg': 123, 'gust': 1.69}, 'visibility': 10000, 'pop': 1, 'rain': {'3h': 2.88}, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-06 03:00:00'}, {'dt': 1749189600, 'main': {'temp': 295.13, 'feels_like': 295.84, 'temp_min': 295.13, 'temp_max': 295.13, 'pressure': 1016, 'sea_level': 1016, 'grnd_level': 1006, 'humidity': 94, 'temp_kf': 0}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'clouds': {'all': 2}, 'wind': {'speed': 1.87, 'deg': 146, 'gust': 1.89}, 'visibility': 10000, 'pop': 0.8, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-06 06:00:00'}, {'dt': 1749200400, 'main': {'temp': 294.5, 'feels_like': 295.17, 'temp_min': 294.5, 'temp_max': 294.5, 'pressure': 1015, 'sea_level': 1015, 'grnd_level': 1006, 'humidity': 95, 'temp_kf': 0}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'clouds': {'all': 4}, 'wind': {'speed': 1.37, 'deg': 161, 'gust': 1.43}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-06 09:00:00'}, {'dt': 1749211200, 'main': {'temp': 295.82, 'feels_like': 296.54, 'temp_min': 295.82, 'temp_max': 295.82, 'pressure': 1017, 'sea_level': 1017, 'grnd_level': 1007, 'humidity': 92, 'temp_kf': 0}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'clouds': {'all': 3}, 'wind': {'speed': 0.6, 'deg': 249, 'gust': 0.82}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-06 12:00:00'}, {'dt': 1749222000, 'main': {'temp': 301.12, 'feels_like': 304.02, 'temp_min': 301.12, 'temp_max': 301.12, 'pressure': 1017, 'sea_level': 1017, 'grnd_level': 1007, 'humidity': 72, 'temp_kf': 0}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'clouds': {'all': 3}, 'wind': {'speed': 1.54, 'deg': 267, 'gust': 1.74}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-06 15:00:00'}, {'dt': 1749232800, 'main': {'temp': 304.03, 'feels_like': 307.5, 'temp_min': 304.03, 'temp_max': 304.03, 'pressure': 1015, 'sea_level': 1015, 'grnd_level': 1005, 'humidity': 59, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 12}, 'wind': {'speed': 2.16, 'deg': 256, 'gust': 2.38}, 'visibility': 10000, 'pop': 0.4, 'rain': {'3h': 0.55}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-06 18:00:00'}, {'dt': 1749243600, 'main': {'temp': 305.1, 'feels_like': 308.16, 'temp_min': 305.1, 'temp_max': 305.1, 'pressure': 1014, 'sea_level': 1014, 'grnd_level': 1004, 'humidity': 53, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 46}, 'wind': {'speed': 2.29, 'deg': 283, 'gust': 3.55}, 'visibility': 10000, 'pop': 0.42, 'rain': {'3h': 0.33}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-06 21:00:00'}, {'dt': 1749254400, 'main': {'temp': 300.9, 'feels_like': 304.09, 'temp_min': 300.9, 'temp_max': 300.9, 'pressure': 1014, 'sea_level': 1014, 'grnd_level': 1004, 'humidity': 76, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 58}, 'wind': {'speed': 2.75, 'deg': 171, 'gust': 4.81}, 'visibility': 10000, 'pop': 0.2, 'rain': {'3h': 0.1}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-07 00:00:00'}, {'dt': 1749265200, 'main': {'temp': 299.17, 'feels_like': 299.17, 'temp_min': 299.17, 'temp_max': 299.17, 'pressure': 1015, 'sea_level': 1015, 'grnd_level': 1005, 'humidity': 76, 'temp_kf': 0}, 'weather': [{'id': 803, 'main': 'Clouds', 'description': 'broken clouds', 'icon': '04n'}], 'clouds': {'all': 72}, 'wind': {'speed': 2.85, 'deg': 213, 'gust': 8.34}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-07 03:00:00'}, {'dt': 1749276000, 'main': {'temp': 297.9, 'feels_like': 298.49, 'temp_min': 297.9, 'temp_max': 297.9, 'pressure': 1014, 'sea_level': 1014, 'grnd_level': 1004, 'humidity': 79, 'temp_kf': 0}, 'weather': [{'id': 803, 'main': 'Clouds', 'description': 'broken clouds', 'icon': '04n'}], 'clouds': {'all': 77}, 'wind': {'speed': 3.74, 'deg': 211, 'gust': 10.21}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-07 06:00:00'}, {'dt': 1749286800, 'main': {'temp': 295.77, 'feels_like': 296.39, 'temp_min': 295.77, 'temp_max': 295.77, 'pressure': 1014, 'sea_level': 1014, 'grnd_level': 1004, 'humidity': 88, 'temp_kf': 0}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01n'}], 'clouds': {'all': 0}, 'wind': {'speed': 2.75, 'deg': 234, 'gust': 8.94}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-07 09:00:00'}, {'dt': 1749297600, 'main': {'temp': 297.15, 'feels_like': 297.9, 'temp_min': 297.15, 'temp_max': 297.15, 'pressure': 1015, 'sea_level': 1015, 'grnd_level': 1005, 'humidity': 88, 'temp_kf': 0}, 'weather': [{'id': 800, 'main': 'Clear', 'description': 'clear sky', 'icon': '01d'}], 'clouds': {'all': 1}, 'wind': {'speed': 3.01, 'deg': 244, 'gust': 8.82}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-07 12:00:00'}, {'dt': 1749308400, 'main': {'temp': 302.3, 'feels_like': 306.21, 'temp_min': 302.3, 'temp_max': 302.3, 'pressure': 1015, 'sea_level': 1015, 'grnd_level': 1005, 'humidity': 70, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 52}, 'wind': {'speed': 4.92, 'deg': 278, 'gust': 7.43}, 'visibility': 10000, 'pop': 0.38, 'rain': {'3h': 0.16}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-07 15:00:00'}, {'dt': 1749319200, 'main': {'temp': 304.42, 'feels_like': 308.84, 'temp_min': 304.42, 'temp_max': 304.42, 'pressure': 1014, 'sea_level': 1014, 'grnd_level': 1004, 'humidity': 61, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 30}, 'wind': {'speed': 4.03, 'deg': 264, 'gust': 6.61}, 'visibility': 10000, 'pop': 1, 'rain': {'3h': 1.77}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-07 18:00:00'}, {'dt': 1749330000, 'main': {'temp': 306.53, 'feels_like': 310.22, 'temp_min': 306.53, 'temp_max': 306.53, 'pressure': 1012, 'sea_level': 1012, 'grnd_level': 1002, 'humidity': 50, 'temp_kf': 0}, 'weather': [{'id': 803, 'main': 'Clouds', 'description': 'broken clouds', 'icon': '04d'}], 'clouds': {'all': 67}, 'wind': {'speed': 2.98, 'deg': 309, 'gust': 5.6}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-07 21:00:00'}, {'dt': 1749340800, 'main': {'temp': 302.81, 'feels_like': 307.6, 'temp_min': 302.81, 'temp_max': 302.81, 'pressure': 1011, 'sea_level': 1011, 'grnd_level': 1002, 'humidity': 71, 'temp_kf': 0}, 'weather': [{'id': 803, 'main': 'Clouds', 'description': 'broken clouds', 'icon': '04d'}], 'clouds': {'all': 79}, 'wind': {'speed': 2.47, 'deg': 189, 'gust': 3.36}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-08 00:00:00'}, {'dt': 1749351600, 'main': {'temp': 300.74, 'feels_like': 303.04, 'temp_min': 300.74, 'temp_max': 300.74, 'pressure': 1012, 'sea_level': 1012, 'grnd_level': 1002, 'humidity': 70, 'temp_kf': 0}, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04n'}], 'clouds': {'all': 95}, 'wind': {'speed': 4.32, 'deg': 221, 'gust': 10.49}, 'visibility': 10000, 'pop': 0.18, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-08 03:00:00'}, {'dt': 1749362400, 'main': {'temp': 296.86, 'feels_like': 297.71, 'temp_min': 296.86, 'temp_max': 296.86, 'pressure': 1012, 'sea_level': 1012, 'grnd_level': 1002, 'humidity': 93, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10n'}], 'clouds': {'all': 96}, 'wind': {'speed': 3.71, 'deg': 242, 'gust': 8.89}, 'visibility': 10000, 'pop': 1, 'rain': {'3h': 1.69}, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-08 06:00:00'}, {'dt': 1749373200, 'main': {'temp': 295.62, 'feels_like': 296.43, 'temp_min': 295.62, 'temp_max': 295.62, 'pressure': 1012, 'sea_level': 1012, 'grnd_level': 1002, 'humidity': 96, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10n'}], 'clouds': {'all': 100}, 'wind': {'speed': 1.72, 'deg': 296, 'gust': 3.48}, 'visibility': 10000, 'pop': 1, 'rain': {'3h': 2.17}, 'sys': {'pod': 'n'}, 'dt_txt': '2025-06-08 09:00:00'}, {'dt': 1749384000, 'main': {'temp': 295.69, 'feels_like': 296.48, 'temp_min': 295.69, 'temp_max': 295.69, 'pressure': 1013, 'sea_level': 1013, 'grnd_level': 1003, 'humidity': 95, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 98}, 'wind': {'speed': 2.27, 'deg': 332, 'gust': 3.56}, 'visibility': 10000, 'pop': 1, 'rain': {'3h': 0.86}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-08 12:00:00'}, {'dt': 1749394800, 'main': {'temp': 300.01, 'feels_like': 301.62, 'temp_min': 300.01, 'temp_max': 300.01, 'pressure': 1013, 'sea_level': 1013, 'grnd_level': 1003, 'humidity': 68, 'temp_kf': 0}, 'weather': [{'id': 500, 'main': 'Rain', 'description': 'light rain', 'icon': '10d'}], 'clouds': {'all': 84}, 'wind': {'speed': 3.36, 'deg': 295, 'gust': 4.58}, 'visibility': 10000, 'pop': 0.78, 'rain': {'3h': 0.62}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-08 15:00:00'}, {'dt': 1749405600, 'main': {'temp': 302.97, 'feels_like': 304.91, 'temp_min': 302.97, 'temp_max': 302.97, 'pressure': 1012, 'sea_level': 1012, 'grnd_level': 1002, 'humidity': 56, 'temp_kf': 0}, 'weather': [{'id': 804, 'main': 'Clouds', 'description': 'overcast clouds', 'icon': '04d'}], 'clouds': {'all': 92}, 'wind': {'speed': 2.57, 'deg': 223, 'gust': 3.27}, 'visibility': 10000, 'pop': 0.35, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-08 18:00:00'}, {'dt': 1749416400, 'main': {'temp': 304.98, 'feels_like': 306.97, 'temp_min': 304.98, 'temp_max': 304.98, 'pressure': 1010, 'sea_level': 1010, 'grnd_level': 1000, 'humidity': 49, 'temp_kf': 0}, 'weather': [{'id': 802, 'main': 'Clouds', 'description': 'scattered clouds', 'icon': '03d'}], 'clouds': {'all': 36}, 'wind': {'speed': 2.28, 'deg': 213, 'gust': 4.58}, 'visibility': 10000, 'pop': 0, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-08 21:00:00'}, {'dt': 1749427200, 'main': {'temp': 296.96, 'feels_like': 297.85, 'temp_min': 296.96, 'temp_max': 296.96, 'pressure': 1010, 'sea_level': 1010, 'grnd_level': 1000, 'humidity': 94, 'temp_kf': 0}, 'weather': [{'id': 501, 'main': 'Rain', 'description': 'moderate rain', 'icon': '10d'}], 'clouds': {'all': 65}, 'wind': {'speed': 2.98, 'deg': 87, 'gust': 4.09}, 'visibility': 10000, 'pop': 1, 'rain': {'3h': 6.75}, 'sys': {'pod': 'd'}, 'dt_txt': '2025-06-09 00:00:00'}], 'city': {'id': 4076795, 'name': 'Montgomery', 'coord': {'lat': 32.2335, 'lon': -86.2333}, 'country': 'US', 'population': 0, 'timezone': -18000, 'sunrise': 1748947125, 'sunset': 1748998071}}



#print(f"api key: {api_key}")
#print(f"city code: {city_name}")
#print(f"this is the complete url:\n{complete_url}")

print("begin".upper())
print("*" * 9)
#print(data)

# temp conversions
def to_fahrenheit(temp_data):
    return round((temp_data - 273.15) * 9/5 + 32, 1)

def convert_all_temps(weather_data):
    temps = {
        'temp': to_fahrenheit(weather_data['list'][0]['main']['temp']),
        'feels_like': to_fahrenheit(weather_data['list'][0]['main']['feels_like']),
        'temp_min': to_fahrenheit(weather_data['list'][0]['main']['temp_min']),
        'temp_max': to_fahrenheit(weather_data['list'][0]['main']['temp_max'])
    }
    return temps

# convert all temps from api call
converted = convert_all_temps(data)

def convert_to_central_tz(timestamp):
    utc_dt = datetime.datetime.fromtimestamp(timestamp, tz=ZoneInfo('UTC'))
    central_dt = utc_dt.astimezone(ZoneInfo('America/Chicago'))
    return central_dt

# Convert Unix timestamps to readable time
sunrise = convert_to_central_tz(data['city']['sunrise']).strftime('%I:%M %p')
sunset = convert_to_central_tz(data['city']['sunset']).strftime('%I:%M %p')

# main display
print(f"Current Forecast")
print(f"Temperature: {converted['temp']}{degrees_fahrenheit}")
print(f"Feels Like: {converted['feels_like']}{degrees_fahrenheit}")
print(f"Conditions: {data['list'][0]['weather'][0]['description'].title()}")
print(f"Humidity: {data['list'][0]['main']['humidity']}%")
print(f"Low/High: {converted['temp_min']}{degrees_fahrenheit}/{converted['temp_max']}{degrees_fahrenheit}")
print(f"Sunrise: {sunrise}")
print(f"Sunset: {sunset}")
print("\n")
print(f"Next Few Days...")

for forecast in data['list'][:15:3]: # limits 15 and step is 3 or skips 3
    print(f"Date: {forecast['dt_txt']}")
    print(f"Temperature: {to_fahrenheit(forecast['main']['temp_max'])}{degrees_fahrenheit}")
    print(f"Conditions: {forecast['weather'][0]['description'].title()}")
    print(f"Rain Chance: {forecast['pop'] * 100:.0f}%\n")

    # unsure about this feature as of now. also need to convert to inches
    # if 'rain' in forecast:
    #     print(f"Rain: {forecast['rain']['3h']}mm")


#print(to_fahrenheit(600))
print("*" * 9)
print("end".upper())